{"remainingRequest":"C:\\Users\\tarena\\Desktop\\weixin\\wechat\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\tarena\\Desktop\\weixin\\wechat\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tarena\\Desktop\\weixin\\wechat\\src\\components\\message\\chat\\chat.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\tarena\\Desktop\\weixin\\wechat\\src\\components\\message\\chat\\chat.vue","mtime":1562914450284},{"path":"C:\\Users\\tarena\\Desktop\\weixin\\wechat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\tarena\\Desktop\\weixin\\wechat\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\tarena\\Desktop\\weixin\\wechat\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport chatUser from \"./chat-user\";\nexport default {\n  data() {\n    return {\n      chatContent: \"\",\n      Content: [],\n      display: \"display:none\",\n      randomReply: [\"你好!\", \"好的\", \"OK\", \"没问题\", \"别这样\", \"再见\", \"早上好\", \"晚上好\", \"中午好\", \"你刚才说什么，我没看清楚，请再说一遍!\", \"为什么？为什么我在线，你就不在线，你在线，我就不在线呢？\", \"您所呼叫的用户尚在厕所中，稍后请拿厕纸给他！\", \"香蕉，你的大西瓜，再叫我咬你！咔咔咔咔咔咔…\", \"广告之后，马上回来！\", \"唉呀——你可真调皮！你看，我话还没说完你又来了！\", \"你发的什么啊？我看着怎么是乱码！\", \"真的要跟我聊天?想好了?不后悔了?真的不后悔了?\", \"走开一下，如果3分钟之内还没回请不要发飙，因为我正在对着设相头摆POSE！\", \"对不起，由于服务器的原因，您刚才发的信息丢失，请重发一面。\", \"她说她在游戏，有事请大声的叫她，大声点，再大声点。\"],\n      neirong1: \"\",\n      chatUser: false // details: [],\n      // thisdetails: []\n\n    };\n  },\n\n  methods: {\n    addContent() {\n      if (!this.chatContent == \"\") {\n        this.Content.push({\n          askImg: \"a_7.png\",\n          askContent: this.chatContent\n        }), this.chatContent = \"\";\n        setTimeout(() => {\n          this.Content.push({\n            replyImg: \"a_7.png\",\n            replyContent: this.randomReply[Math.floor(Math.random() * 20)]\n          });\n        }, 1000);\n      }\n    },\n\n    scroll() {\n      var now = new Date();\n      var div = document.getElementById(\"scrolldiv\");\n      div.scrollTop = div.scrollHeight + 50;\n      setTimeout(() => {\n        div.scrollTop += 55;\n      }, 1);\n    },\n\n    senddetails() {\n      this.axios.get(\"details\", {\n        params: {\n          lid: this.lid\n        }\n      }).then(result => {\n        var result = result.data.data; // var arr = [];\n        // for (var p of result[0].wx_details.split(\",\")) {\n        //   arr.push(p.split(\" \"));\n        // }\n        // for (var i = 0, ii = 0; i < arr.length; i++) {\n        //   var reg = arr[i][0].search(this.lid);\n        //    if (arr[i][0].search(this.lid) == \"1\") {\n        //      this.details[ii] = arr[i]\n        //        .join(\",\")\n        //        .split(\",\")[1]\n        //        .replace(/\\[/g, \"\")\n        //        .replace(/\\]/g, \"\");\n        //      ii++;\n        //    } else {\n        //      this.thisdetails = arr[i]\n        //        .join(\",\")\n        //        .split(\",\")[1]\n        //        .replace(/\\[/g, \"\")\n        //        .replace(/\\]/g, \"\");\n        //    }\n        //}\n        // console.log(result);\n\n        var arr = [];\n\n        for (var p of result[0].wx_details.split(\",\")) {\n          arr.push(p.split(\" \"));\n        } // console.log(arr);\n\n\n        for (var i = 0; i < arr.length; i++) {\n          var mylid = arr[i][0].replace(/\\[/g, \"\").replace(/\\]/g, \"\"); // console.log(mylid);\n\n          var con = arr[i][1].replace(/\\[/g, \"\").replace(/\\]/g, \"\"); // console.log(con);\n\n          if (mylid == result[0].wx_myid_lid) {\n            this.Content.push({\n              askImg: \"a_7.png\",\n              askContent: con\n            });\n          } else if (mylid == result[0].wx_thid_lid) {\n            this.Content.push({\n              replyImg: \"a_7.png\",\n              replyContent: con\n            });\n          }\n        }\n      });\n    }\n\n  },\n  props: {\n    clickroom: {\n      type: Function\n    },\n    lid: {\n      default: \"\"\n    },\n    cUser: {\n      type: Function\n    },\n    uname: {\n      default: \"\"\n    },\n    img: {\n      default: \"\"\n    }\n  },\n  watch: {\n    Content() {\n      this.scroll();\n    },\n\n    lid() {\n      this.senddetails();\n      console.log(this.Content);\n    }\n\n  },\n  components: {\n    chatUser: chatUser\n  }\n};",{"version":3,"sources":["chat.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"chatroom\">\r\n    <div class=\"back\">\r\n      <span class=\"leftback\">\r\n        <img src=\"http://zidan.applinzi.com/wechat/ic_back.png\" alt @click=\"clickroom()\">\r\n        <p>{{uname}}</p>\r\n      </span>\r\n\r\n      <span class=\"rightuser\" @click=\"cUser(lid,uname)\">\r\n        <img src=\"http://zidan.applinzi.com/wechat/backMyilList.png\" alt>\r\n      </span>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"content-wapper\" id=\"scrolldiv\">\r\n        <div class=\"content-top\">\r\n          <p>————现在可以和我聊天了————</p>\r\n        </div>\r\n        <div class=\"content-body\">\r\n          <ul v-for=\"(item,index) in Content\" :key=\"index\">\r\n            <li class=\"ask\" :id=\"index\" v-show=\"item.askContent\">\r\n              <img :src=\"item.askImg\" alt>\r\n              <p>{{item.askContent}}</p>\r\n            </li>\r\n            <li class=\"reply\" v-show=\"item.replyContent\">\r\n              <img :src=\"item.replyImg\" alt>\r\n              <p>{{item.replyContent}}</p>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom\">\r\n      <div class=\"send\">\r\n        <input type=\"text\" placeholder=\"请输入聊天内容\" v-model=\"chatContent\">\r\n        <mt-button size=\"normal\" class=\"sendbutton\" @click=\"addContent\">发送</mt-button>\r\n      </div>\r\n    </div>\r\n    <!-- <mt-popup position=\"right\" v-model=\"chatUser\" class=\"chat\">\r\n            <chatUser :cUser=\"cUser\"></chatUser>\r\n    </mt-popup>-->\r\n  </div>\r\n</template>\r\n<script>\r\nimport chatUser from \"./chat-user\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      chatContent: \"\",\r\n      Content: [],\r\n      display: \"display:none\",\r\n      randomReply: [\r\n        \"你好!\",\r\n        \"好的\",\r\n        \"OK\",\r\n        \"没问题\",\r\n        \"别这样\",\r\n        \"再见\",\r\n        \"早上好\",\r\n        \"晚上好\",\r\n        \"中午好\",\r\n        \"你刚才说什么，我没看清楚，请再说一遍!\",\r\n        \"为什么？为什么我在线，你就不在线，你在线，我就不在线呢？\",\r\n        \"您所呼叫的用户尚在厕所中，稍后请拿厕纸给他！\",\r\n        \"香蕉，你的大西瓜，再叫我咬你！咔咔咔咔咔咔…\",\r\n        \"广告之后，马上回来！\",\r\n        \"唉呀——你可真调皮！你看，我话还没说完你又来了！\",\r\n        \"你发的什么啊？我看着怎么是乱码！\",\r\n        \"真的要跟我聊天?想好了?不后悔了?真的不后悔了?\",\r\n        \"走开一下，如果3分钟之内还没回请不要发飙，因为我正在对着设相头摆POSE！\",\r\n        \"对不起，由于服务器的原因，您刚才发的信息丢失，请重发一面。\",\r\n        \"她说她在游戏，有事请大声的叫她，大声点，再大声点。\"\r\n      ],\r\n      neirong1: \"\",\r\n      chatUser: false,\r\n      // details: [],\r\n      // thisdetails: []\r\n    };\r\n  },\r\n  methods: {\r\n    addContent() {\r\n      if (!this.chatContent == \"\") {\r\n        this.Content.push({\r\n          askImg: \"a_7.png\",\r\n          askContent: this.chatContent\r\n        }),\r\n          this.chatContent = \"\";\r\n        setTimeout(() => {\r\n          this.Content.push({\r\n            replyImg: \"a_7.png\",\r\n            replyContent: this.randomReply[Math.floor(Math.random() * 20)]\r\n          });\r\n        }, 1000);\r\n      }\r\n    },\r\n    scroll() {\r\n      var now = new Date();\r\n      var div = document.getElementById(\"scrolldiv\");\r\n      div.scrollTop = div.scrollHeight + 50;\r\n      setTimeout(() => {\r\n        div.scrollTop += 55;\r\n      }, 1);\r\n    },\r\n    senddetails() {\r\n      this.axios.get(\"details\", { params: { lid: this.lid } }).then(result => {\r\n        var result = result.data.data;\r\n        // var arr = [];\r\n        // for (var p of result[0].wx_details.split(\",\")) {\r\n        //   arr.push(p.split(\" \"));\r\n        // }\r\n        // for (var i = 0, ii = 0; i < arr.length; i++) {\r\n        //   var reg = arr[i][0].search(this.lid);\r\n        //    if (arr[i][0].search(this.lid) == \"1\") {\r\n        //      this.details[ii] = arr[i]\r\n        //        .join(\",\")\r\n        //        .split(\",\")[1]\r\n        //        .replace(/\\[/g, \"\")\r\n        //        .replace(/\\]/g, \"\");\r\n        //      ii++;\r\n        //    } else {\r\n        //      this.thisdetails = arr[i]\r\n        //        .join(\",\")\r\n        //        .split(\",\")[1]\r\n        //        .replace(/\\[/g, \"\")\r\n        //        .replace(/\\]/g, \"\");\r\n        //    }\r\n\r\n        //}\r\n        // console.log(result);\r\n        var arr=[];\r\n        for(var p of result[0].wx_details.split(\",\")){\r\n            arr.push(p.split(\" \"));\r\n        }\r\n        // console.log(arr);\r\n        for(var i=0;i<arr.length;i++){\r\n            var mylid=arr[i][0].replace(/\\[/g, \"\").replace(/\\]/g, \"\");\r\n            // console.log(mylid);\r\n            var con=arr[i][1].replace(/\\[/g, \"\").replace(/\\]/g, \"\");\r\n            // console.log(con);\r\n            if(mylid==result[0].wx_myid_lid){\r\n              this.Content.push({\r\n                askImg: \"a_7.png\",\r\n                askContent: con\r\n              })\r\n            }else if(mylid==result[0].wx_thid_lid){\r\n              this.Content.push({\r\n                replyImg: \"a_7.png\",\r\n                replyContent: con\r\n              })\r\n            }\r\n        }\r\n        \r\n      });\r\n    }\r\n  },\r\n  props: {\r\n    clickroom: { type: Function },\r\n    lid: { default: \"\" },\r\n    cUser: { type: Function },\r\n    uname: { default: \"\" },\r\n    img: { default: \"\" },\r\n  },\r\n  watch: {\r\n    Content() {\r\n      this.scroll();\r\n      \r\n    },\r\n    lid(){\r\n      this.senddetails();\r\n      console.log(this.Content);\r\n    },\r\n  },\r\n  components: {\r\n    chatUser: chatUser\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.chatroom {\r\n  z-index: 200;\r\n  position: relative;\r\n}\r\n/* 头部样式 */\r\n.back {\r\n  position: fixed;\r\n  top: 0;\r\n  height: 50px;\r\n  width: 100%;\r\n  background-color: #1e2b39;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.leftback {\r\n  display: flex;\r\n}\r\n.leftback img {\r\n  height: 16px;\r\n  margin-left: 15px;\r\n  margin-top: 2px;\r\n}\r\n.leftback p {\r\n  color: white;\r\n  font-size: 20px;\r\n  margin-left: 15px;\r\n  padding-left: 10px;\r\n  border-left: 1px solid #000;\r\n  margin-bottom: 0;\r\n}\r\n.rightuser img {\r\n  margin-right: 15px;\r\n  margin-top: 2px;\r\n  width: 28px;\r\n}\r\n\r\n/* 聊天内容样式 */\r\n.content {\r\n  position: fixed;\r\n  top: 50px;\r\n  bottom: 50px;\r\n  background-color: #ebebeb;\r\n  width: 100%;\r\n}\r\n.content .content-wapper {\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n.content-top {\r\n  margin-top: 5px;\r\n  font-size: 14px;\r\n  color: #adadad;\r\n  text-align: center;\r\n}\r\n\r\n.content-body {\r\n  padding: 20px 10px;\r\n}\r\n.content-body ul {\r\n  list-style: none;\r\n  display: block;\r\n  padding: 0;\r\n}\r\n/* 发送消息样式 */\r\nul li.ask {\r\n  text-align: right;\r\n  line-height: 28px;\r\n  margin-bottom: 15px;\r\n}\r\n.content-body ul li::after {\r\n  display: table;\r\n  content: \"\";\r\n  clear: both;\r\n}\r\n.content-body ul li > img {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\nli.ask > img {\r\n  float: right;\r\n  margin-left: 15px;\r\n}\r\n.content-body ul li > p {\r\n  line-height: 30px;\r\n  padding: 3px 10px;\r\n  max-width: 190px;\r\n\r\n  border-radius: 3px;\r\n}\r\nli.ask > p {\r\n  float: right;\r\n  background-color: #09bb07;\r\n  color: #fff;\r\n}\r\n/* 回复消息样式 */\r\nul li.reply {\r\n  text-align: left;\r\n  line-height: 28px;\r\n  margin-bottom: 15px;\r\n}\r\nli.reply > img {\r\n  float: left;\r\n  margin-right: 15px;\r\n}\r\nli.reply > p {\r\n  float: left;\r\n  background-color: #fff;\r\n  color: #000;\r\n}\r\n\r\n/* 底部样式 */\r\n.bottom {\r\n  position: fixed;\r\n  bottom: 0;\r\n  height: 50px;\r\n  width: 100%;\r\n  background-color: #fff;\r\n}\r\n.send {\r\n  height: 50px;\r\n}\r\n.send input {\r\n  height: 30px !important;\r\n  width: 70% !important;\r\n  border: none !important;\r\n  margin: 10px !important;\r\n  font-size: 15px !important;\r\n  border-bottom: 1px solid #adadad !important;\r\n  padding-left: 8px !important;\r\n}\r\n.send button {\r\n  margin-top: 10px;\r\n  background-color: #09bb07;\r\n  color: white;\r\n  height: 28px;\r\n  width: 20%;\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\components\\message\\chat"}]}