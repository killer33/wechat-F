{"remainingRequest":"D:\\wechat-F\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\wechat-F\\src\\components\\message\\chat\\chat.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"D:\\wechat-F\\src\\components\\message\\chat\\chat.vue","mtime":1560178798636},{"path":"D:\\wechat-F\\node_modules\\css-loader\\index.js","mtime":1559813992684},{"path":"D:\\wechat-F\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1559813999924},{"path":"D:\\wechat-F\\node_modules\\postcss-loader\\lib\\index.js","mtime":1559813997102},{"path":"D:\\wechat-F\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1559813990204},{"path":"D:\\wechat-F\\node_modules\\vue-loader\\lib\\index.js","mtime":1559813999923}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.chatroom {\r\n  z-index: 200;\r\n  position: relative;\r\n}\r\n/* 头部样式 */\r\n.back {\r\n  position: fixed;\r\n  top: 0;\r\n  height: 50px;\r\n  width: 100%;\r\n  background-color: #1e2b39;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.leftback {\r\n  display: flex;\r\n}\r\n.leftback img {\r\n  height: 16px;\r\n  margin-left: 15px;\r\n  margin-top: 2px;\r\n}\r\n.leftback p {\r\n  color: white;\r\n  font-size: 20px;\r\n  margin-left: 15px;\r\n  padding-left: 10px;\r\n  border-left: 1px solid #000;\r\n  margin-bottom: 0;\r\n}\r\n.rightuser img {\r\n  margin-right: 15px;\r\n  margin-top: 2px;\r\n  width: 28px;\r\n}\r\n\r\n/* 聊天内容样式 */\r\n.content {\r\n  position: fixed;\r\n  top: 50px;\r\n  bottom: 50px;\r\n  background-color: #ebebeb;\r\n  width: 100%;\r\n}\r\n.content .content-wapper {\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n.content-top {\r\n  margin-top: 5px;\r\n  font-size: 14px;\r\n  color: #adadad;\r\n  text-align: center;\r\n}\r\n\r\n.content-body {\r\n  padding: 20px 10px;\r\n}\r\n.content-body ul {\r\n  list-style: none;\r\n  display: block;\r\n  padding: 0;\r\n}\r\n/* 发送消息样式 */\r\nul li.ask {\r\n  text-align: right;\r\n  line-height: 28px;\r\n  margin-bottom: 15px;\r\n}\r\n.content-body ul li::after {\r\n  display: table;\r\n  content: \"\";\r\n  clear: both;\r\n}\r\n.content-body ul li > img {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\nli.ask > img {\r\n  float: right;\r\n  margin-left: 15px;\r\n}\r\n.content-body ul li > p {\r\n  line-height: 30px;\r\n  padding: 3px 10px;\r\n  max-width: 190px;\r\n\r\n  border-radius: 3px;\r\n}\r\nli.ask > p {\r\n  float: right;\r\n  background-color: #09bb07;\r\n  color: #fff;\r\n}\r\n/* 回复消息样式 */\r\nul li.reply {\r\n  text-align: left;\r\n  line-height: 28px;\r\n  margin-bottom: 15px;\r\n}\r\nli.reply > img {\r\n  float: left;\r\n  margin-right: 15px;\r\n}\r\nli.reply > p {\r\n  float: left;\r\n  background-color: #fff;\r\n  color: #000;\r\n}\r\n\r\n/* 底部样式 */\r\n.bottom {\r\n  position: fixed;\r\n  bottom: 0;\r\n  height: 50px;\r\n  width: 100%;\r\n  background-color: #fff;\r\n}\r\n.send {\r\n  height: 50px;\r\n}\r\n.send input {\r\n  height: 30px !important;\r\n  width: 70% !important;\r\n  border: none !important;\r\n  margin: 10px !important;\r\n  font-size: 15px !important;\r\n  border-bottom: 1px solid #adadad !important;\r\n  padding-left: 8px !important;\r\n}\r\n.send button {\r\n  margin-top: 10px;\r\n  background-color: #09bb07;\r\n  color: white;\r\n  height: 28px;\r\n  width: 20%;\r\n}\r\n",{"version":3,"sources":["chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chat.vue","sourceRoot":"src\\components\\message\\chat","sourcesContent":["<template>\r\n  <div class=\"chatroom\">\r\n    <div class=\"back\">\r\n      <span class=\"leftback\">\r\n        <img src=\"http://172.242.19.42:3000/wechat/ic_back.png\" alt @click=\"clickroom()\">\r\n        <p>{{uname}}</p>\r\n      </span>\r\n\r\n      <span class=\"rightuser\" @click=\"cUser(lid,uname)\">\r\n        <img src=\"http://172.242.19.42:3000/wechat/backMyilList.png\" alt>\r\n      </span>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"content-wapper\" id=\"scrolldiv\">\r\n        <div class=\"content-top\">\r\n          <p>————现在可以和我聊天了————</p>\r\n        </div>\r\n        <div class=\"content-body\">\r\n          <ul v-for=\"(item,index) in Content\" :key=\"index\">\r\n            <li class=\"ask\" :id=\"index\" v-show=\"item.askContent\">\r\n              <img :src=\"item.replyImg\" alt>\r\n              <p>{{item.askContent}}</p>\r\n            </li>\r\n            <li class=\"reply\" v-show=\"item.replyContent\">\r\n              <img :src=\"img\" alt>\r\n              <p>{{item.replyContent}}</p>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom\">\r\n      <div class=\"send\">\r\n        <input type=\"text\" placeholder=\"请输入聊天内容\" v-model=\"chatContent\">\r\n        <mt-button size=\"normal\" class=\"sendbutton\" @click=\"addContent\">发送</mt-button>\r\n      </div>\r\n    </div>\r\n    <!-- <mt-popup position=\"right\" v-model=\"chatUser\" class=\"chat\">\r\n            <chatUser :cUser=\"cUser\"></chatUser>\r\n    </mt-popup>-->\r\n  </div>\r\n</template>\r\n<script>\r\nimport chatUser from \"./chat-user\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      chatContent: \"\",\r\n      Content: [],\r\n      display: \"display:none\",\r\n      // randomReply: [\r\n      //   \"你好!\",\r\n      //   \"好的\",\r\n      //   \"OK\",\r\n      //   \"没问题\",\r\n      //   \"就这样\",\r\n      //   \"再见\",\r\n      //   \"早上好\",\r\n      //   \"晚上好\",\r\n      //   \"中午好\"\r\n      // ],\r\n      neirong1: \"\",\r\n      chatUser: false,\r\n      // details: [],\r\n      // thisdetails: []\r\n    };\r\n  },\r\n  methods: {\r\n    addContent() {\r\n      if (!this.chatContent == \"\") {\r\n        this.Content.push({\r\n          askImg: \"a_7.png\",\r\n          askContent: this.chatContent\r\n        }),\r\n          this.chatContent = \"\";\r\n        // setTimeout(() => {\r\n        //   this.Content.push({\r\n        //     replyImg: \"a_7.png\",\r\n        //     replyContent: this.randomReply[Math.floor(Math.random() * 9)]\r\n        //     //自动回复代码this.randomReply[Math.floor(Math.random() * 19)]\r\n        //   });\r\n        // }, 1000);\r\n      }\r\n    },\r\n    clear() {\r\n      // this.Content = [];\r\n    },\r\n    scroll() {\r\n      var now = new Date();\r\n      var div = document.getElementById(\"scrolldiv\");\r\n      div.scrollTop = div.scrollHeight + 50;\r\n      setTimeout(() => {\r\n        div.scrollTop += 55;\r\n      }, 1);\r\n    },\r\n    senddetails() {\r\n      this.axios.get(\"details\", { params: { lid: this.lid } }).then(result => {\r\n        var result = result.data.data;\r\n        // var arr = [];\r\n        // for (var p of result[0].wx_details.split(\",\")) {\r\n        //   arr.push(p.split(\" \"));\r\n        // }\r\n        // for (var i = 0, ii = 0; i < arr.length; i++) {\r\n        //   var reg = arr[i][0].search(this.lid);\r\n        //    if (arr[i][0].search(this.lid) == \"1\") {\r\n        //      this.details[ii] = arr[i]\r\n        //        .join(\",\")\r\n        //        .split(\",\")[1]\r\n        //        .replace(/\\[/g, \"\")\r\n        //        .replace(/\\]/g, \"\");\r\n        //      ii++;\r\n        //    } else {\r\n        //      this.thisdetails = arr[i]\r\n        //        .join(\",\")\r\n        //        .split(\",\")[1]\r\n        //        .replace(/\\[/g, \"\")\r\n        //        .replace(/\\]/g, \"\");\r\n        //    }\r\n\r\n        //}\r\n        // console.log(result);\r\n        var arr=[];\r\n        for(var p of result[0].wx_details.split(\",\")){\r\n            arr.push(p.split(\" \"));\r\n        }\r\n        // console.log(arr);\r\n        for(var i=0;i<arr.length;i++){\r\n            var mylid=arr[i][0].replace(/\\[/g, \"\").replace(/\\]/g, \"\");\r\n            // console.log(mylid);\r\n            var con=arr[i][1].replace(/\\[/g, \"\").replace(/\\]/g, \"\");\r\n            // console.log(con);\r\n            if(mylid==result[0].wx_myid_lid){\r\n              this.Content.push({\r\n                askImg: \"a_7.png\",\r\n                askContent: con\r\n              })\r\n            }else if(mylid==result[0].wx_thid_lid){\r\n              this.Content.push({\r\n                replyImg: \"a_7.png\",\r\n                replyContent: con\r\n              })\r\n            }\r\n        }\r\n        \r\n      });\r\n    }\r\n  },\r\n  props: {\r\n    clickroom: { type: Function },\r\n    lid: { default: \"\" },\r\n    cUser: { type: Function },\r\n    uname: { default: \"\" },\r\n    img: { default: \"\" },\r\n  },\r\n  watch: {\r\n    Content() {\r\n      this.scroll();\r\n      \r\n    },\r\n    lid(){\r\n      this.senddetails();\r\n      console.log(this.Content);\r\n    },\r\n  },\r\n  components: {\r\n    chatUser: chatUser\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.chatroom {\r\n  z-index: 200;\r\n  position: relative;\r\n}\r\n/* 头部样式 */\r\n.back {\r\n  position: fixed;\r\n  top: 0;\r\n  height: 50px;\r\n  width: 100%;\r\n  background-color: #1e2b39;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.leftback {\r\n  display: flex;\r\n}\r\n.leftback img {\r\n  height: 16px;\r\n  margin-left: 15px;\r\n  margin-top: 2px;\r\n}\r\n.leftback p {\r\n  color: white;\r\n  font-size: 20px;\r\n  margin-left: 15px;\r\n  padding-left: 10px;\r\n  border-left: 1px solid #000;\r\n  margin-bottom: 0;\r\n}\r\n.rightuser img {\r\n  margin-right: 15px;\r\n  margin-top: 2px;\r\n  width: 28px;\r\n}\r\n\r\n/* 聊天内容样式 */\r\n.content {\r\n  position: fixed;\r\n  top: 50px;\r\n  bottom: 50px;\r\n  background-color: #ebebeb;\r\n  width: 100%;\r\n}\r\n.content .content-wapper {\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n.content-top {\r\n  margin-top: 5px;\r\n  font-size: 14px;\r\n  color: #adadad;\r\n  text-align: center;\r\n}\r\n\r\n.content-body {\r\n  padding: 20px 10px;\r\n}\r\n.content-body ul {\r\n  list-style: none;\r\n  display: block;\r\n  padding: 0;\r\n}\r\n/* 发送消息样式 */\r\nul li.ask {\r\n  text-align: right;\r\n  line-height: 28px;\r\n  margin-bottom: 15px;\r\n}\r\n.content-body ul li::after {\r\n  display: table;\r\n  content: \"\";\r\n  clear: both;\r\n}\r\n.content-body ul li > img {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\nli.ask > img {\r\n  float: right;\r\n  margin-left: 15px;\r\n}\r\n.content-body ul li > p {\r\n  line-height: 30px;\r\n  padding: 3px 10px;\r\n  max-width: 190px;\r\n\r\n  border-radius: 3px;\r\n}\r\nli.ask > p {\r\n  float: right;\r\n  background-color: #09bb07;\r\n  color: #fff;\r\n}\r\n/* 回复消息样式 */\r\nul li.reply {\r\n  text-align: left;\r\n  line-height: 28px;\r\n  margin-bottom: 15px;\r\n}\r\nli.reply > img {\r\n  float: left;\r\n  margin-right: 15px;\r\n}\r\nli.reply > p {\r\n  float: left;\r\n  background-color: #fff;\r\n  color: #000;\r\n}\r\n\r\n/* 底部样式 */\r\n.bottom {\r\n  position: fixed;\r\n  bottom: 0;\r\n  height: 50px;\r\n  width: 100%;\r\n  background-color: #fff;\r\n}\r\n.send {\r\n  height: 50px;\r\n}\r\n.send input {\r\n  height: 30px !important;\r\n  width: 70% !important;\r\n  border: none !important;\r\n  margin: 10px !important;\r\n  font-size: 15px !important;\r\n  border-bottom: 1px solid #adadad !important;\r\n  padding-left: 8px !important;\r\n}\r\n.send button {\r\n  margin-top: 10px;\r\n  background-color: #09bb07;\r\n  color: white;\r\n  height: 28px;\r\n  width: 20%;\r\n}\r\n</style>\r\n"]}]}